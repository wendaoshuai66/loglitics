function inforPictureController(e,t,a,r,o,i){e.data={},e.data.approvalStatusType=!1,e.searchObj={},e.selectSearchIdList=["selectSearch","selectSearch2","selectSearch3"],e.selectIdList=["select"],e.controllerName="inforPicture",i.all([getApprovalStatusData(e,t,a,r,o)]).then(function(){return getInforModuleSelectData(e,t,a,r,o)}).then(function(){return getShowStatusData(e,t,a,r,o)}),e.columns=[{data:"id"},{data:"title"},{data:"inforModule.name"},{data:"author"},{data:"pictureProvider"},{data:"addDateTime"},{data:"updateDateTime"},{data:"viewTimes"},{data:"keyword"},{data:"approvalStatus"},{data:"approvalDateTime"},{data:"slideShow"}],e.orderableAry=[0],e.approvalStatus=9,e.switchSlideShow=11,e.targetsOpt=12,e.order=[[5,"desc"]],e.wrapAry=[1,2],e.wrapShortAry=[3],e.optHtmlAry=["detail","edit","remove","preview"];var d="getInforPictureList";e.url=d,e.reloadUrl=d,e.searchInit=!0,e.datetimepickerId=["addDateTime"],e.initDataTablesName="inforPictureDataTable",datePickers.init(e,t,a,r,o),dataTables.init(e,t,a,r,o),e.uploadUrl="/summernote/fileupload",e.resetInputList=["title","keyword","author","pictureProvider"],e.addModal=function(){$(".modal-scrollable").on("click",function(){$(this).hide()}),e.data={},e.resetErrorInput(e,t,a,r,o),e.modalTitle="添加图文内容",e.data.approvalStatus="1",editors.init(e),$("#summernote").summernote("code",""),e.triggerSelect(e,t,a,r,o),e.resetForm(e,t,a,r,o),$("#addModal").modal()},e.editModal=function(i){e.data=i,1==i.approvalStatus&&(e.data.approvalStatusType=!0),e.modalTitle="修改图文内容",editors.init(e),$("#summernote").summernote("code",e.data.article),e.triggerSelect(e,t,a,r,o),e.resetForm(e,t,a,r,o),$("#addModal").modal()},e.remove=function(){$("#removeModal").modal("hide"),e.addLoading(),e.url="deleteInforPicture",e.optName="删除",e.params={id:e.removeId},e.postApi(e)},e.search=function(){e.searchInfo(e)},e.changeStatus=function(){e.clearQueue(),$("#changeStatusModal").modal("hide"),e.addLoading(),e.url="changePictureStatus",e.optName="修改模块信息状态",e.params={statusType:e.changeStatusType,id:e.changeStatusId},e.postApi(e,function(){})},e.reset=function(){e.resetSearch(e,t,a,r,o),e.resetDateTimePicker("addDateTimeEnd","addDateTimeStart")},e.preview=function(e){var t=portType+"://"+window.location.host+previewLocationSuffix+"#/viewNews";window.open(t+"?id="+e)},e.changeSlideShow=function(){$("#pictureUpload").modal("hide"),e.addLoading(),e.url="saveInforSlide",e.optName="幻灯设置";var t=e.getScope("slideUpload"),a={slideType:0,inforPicture:{id:e.resultSaveId},slidePicture:t.uploadDown.url};e.params={data:JSON.stringify(a)},e.postApi(e,function(){e.url="changePictureStatus",e.params={statusType:e.changeStatusType,id:e.changeStatusId},e.postApi(e,function(){$("[ng-model="+e.changeStatusType+e.changeStatusId+"]").addClass("myDisabled"),e.clearQueue()})})}}function inforPictureAddController(e,t,a,r,o,i,d,l){e.save=function(){$("#addModal").modal("hide"),e.url="saveInforPicture",void 0!==e.data.id?e.optName="修改":(e.dataRefresh=!0,e.optName="添加"),e.data.article=$("<div>").text($("#summernote").summernote("code")).html(),e.params={data:JSON.stringify(e.data)},e.postApi(e)},e.defaultAssignment=function(t,a){var r=t.target.value;if(r){var o=allSensitiveName,i=o.length,d=0;o.forEach(function(t){if(r.toLowerCase()!=t.toLowerCase())d++;else{sweetAlert("警告","不允许输入敏感字符,请重新输入","warning");var o=a.split(".");e[o[0]][o[1]]=""}}),i===d&&(e.data.pictureProvider=e.data.author)}},e.checkRepeat=function(){e.repeatName="标题",e.repeatUrl="checkRepeatInforPictureTitle",e.checkRepeatName="title",e.checkRepeatApi(e)}}function pictureUploadController(e,t,a,r,o){e.uploadAll=function(){e.getScope("slideUpload").uploader.uploadAll()}}angular.module("MetronicApp").controller("inforPictureController",["$scope","$http","$compile","$location","$filter","$q",inforPictureController]),angular.module("MetronicApp").controller("inforPictureAddController",["$scope","$http","$compile","$location","$filter","$timeout","$stateParams","$q",inforPictureAddController]),angular.module("MetronicApp").controller("pictureUploadController",["$scope","$http","$compile","$location","$filter",pictureUploadController]);