function stockRemovalController(a,t,e,o,r,l,n){a.data={},a.searchObj={},a.selectSearchIdList=["selectSearch"],a.controllerName="stockRemoval",a.selectIdList=["select","select2"],l.all([getMaterialCategorySelectData(a,t,e,o,r)]).then(function(){return getMaterialSelectData(a,t,e,o,r)}).then(function(){return getWarrantyNumberIsDoneSelectData(a,t,e,o,r)}),a.columns=[{data:"id"},{data:"material.name"},{data:"material.specificationsModel"},{data:"material.materialCategory.name"},{data:"material.materialUnit.name"},{data:"warrantyNumber.maintenanceNumber"},{data:"stockRemovalCount"},{data:"stockRemovalDate"},{data:"warrantyNumber.maintenanceStaff.name"},{data:"addDateTime"}],a.newState=n,a.orderableAry=[0],a.wrapAry=[1,2,3],a.wrapShortAry=[5,8],a.targetsOpt=10,a.dateFormatAry=7,a.order=[[7,"desc"]],a.optHtmlAry=["detail","remove"];var d="getStockRemovalList";a.url=d,a.reloadUrl=d,a.initDataTablesName="stockRemovalDataTable",dataTables.init(a,t,e,o,r),a.searchInit=!0,a.datetimepickerId=["stockRemovalDate"],datePickers.init(a,t,e,o,r),a.resetInputList=["stockRemovalCount"],a.addModal=function(){$("#stockRemovalCount").attr("disabled","disabled"),a.data={},a.resetErrorInput(a,t,e,o,r),a.modalTitle="添加出库信息",a.triggerSelect(a,t,e,o,r),a.resetForm(a,t,e,o,r),$("#addModal").modal()},a.editModal=function(l){a.data=l,a.modalTitle="修改出库信息",a.triggerSelect(a,t,e,o,r),a.resetForm(a,t,e,o,r),$("#addModal").modal()},a.remove=function(){$("#removeModal").modal("hide"),a.addLoading(),a.url="deleteStockRemoval",a.optName="删除",a.params={id:a.removeId},a.postApi(a)},a.search=function(){a.searchInfo(a)},a.reset=function(){a.resetSearch(a,t,e,o,r),a.resetDateTimePicker("stockRemovalDateEnd","stockRemovalDateStart")},a.selectMaterial=function(){var t=angular.copy(a.materialSelectData);angular.forEach(t,function(t){t.id==a.data.material.id&&(a.data.material=t,a.maxCount=a.data.material.inventoryQuantity,a.maxLength=a.maxCount+"".length,$("#stockRemovalCount").attr("max",a.maxCount),$("#stockRemovalCount").removeAttr("disabled")),null==a.data.material.id&&(a.data.material=null,$("#stockRemovalCount").attr("disabled","disabled"))})},a.selectWarrantyNumber=function(){var t=angular.copy(a.warrantyNumberSelectData);angular.forEach(t,function(t){t.id==a.data.warrantyNumber.id&&(a.data.warrantyNumber=t),null==a.data.warrantyNumber.id&&(a.data.warrantyNumber=null)})},a.checkMaxCount=function(){a.data.stockRemovalCount>a.maxCount?(sweetAlert("警告","最大可出库数量为:"+a.maxCount+"个","error"),a.maxCountError=!0):a.maxCountError=!1}}function stockRemovalAddController(a,t,e,o,r,l){a.searchInit=!1,a.option={format:"yyyy-mm-dd",minView:2,endDate:new Date},datePickers.init(a,t,e,o,r),a.save=function(){$("#addModal").modal("hide"),a.addLoading(),a.url="saveStockRemoval",void 0!==a.data.id?a.optName="修改":(a.dataRefresh=!0,a.optName="添加"),a.params={data:JSON.stringify(a.data)},l.all([a.postApi(a)]).then(function(){return a.getMaterialLessAlarmInfo()}).then(function(){getMaterialSelectData(a.getScope("stockRemoval"),t,e,o,r)})}}angular.module("MetronicApp").controller("stockRemovalController",["$scope","$http","$compile","$location","$filter","$q","$state",stockRemovalController]),angular.module("MetronicApp").controller("stockRemovalAddController",["$scope","$http","$compile","$location","$filter","$q",stockRemovalAddController]);