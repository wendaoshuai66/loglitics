function departmentController(t,e,a,r,n,o,d){t.data={},t.searchObj={},t.selectSearchIdList=["selectSearch"],t.controllerName="department",d.select2InitCountolerName="department",o.all([getCampusSelectData(t,e,a,r,n)]).then(function(){return getStatusUseTypeData(t,e,a,r,n)}).then(function(){return getShowStatusData(t,e,a,r,n)}),t.selectIdList=["select","select2"],t.columns=[{data:"id"},{data:"name"},{data:"campus.name"},{data:"parent.name"},{data:"ifLogistics"},{data:"description"},{data:"status"},{data:"addDateTime"},{data:"updateDateTime"}],t.orderableAry=[0,3],t.trueOrFalse=[4],t.htmlType=[5],t.switchStatus=6,t.wrapAry=[1,2,3],t.targetsOpt=9,t.order=[[7,"desc"]],t.optHtmlAry=["detail","edit","remove"];var i="getDepartmentList";t.url=i,t.reloadUrl=i,t.initDataTablesName="departmentDataTable",dataTables.init(t,e,a,r,n),t.resetInputList=["name"],t.changeIfLogistics=!1,t.addModal=function(){t.isEdit=!1,t.changeIfLogistics=!0,t.data={},t.resetErrorInput(t,e,a,r,n),t.modalTitle="添加部门信息",t.data.status="1",t.data.ifLogistics="1",t.triggerSelect(t,e,a,r,n),t.resetForm(t,e,a,r,n),$("#addModal").modal()},t.editModal=function(o){t.isEdit=!0,t.changeIfLogistics=!0,t.parentId=o.parent.id,t.data=o,t.changeCampus(function(){var e=t.departmentSelectData;angular.forEach(e,function(a){a.name==t.data.name&&e.splice($.inArray(a,e),1)}),t.data.parent.id=t.parentId}),t.modalTitle="修改部门信息",t.triggerSelect(t,e,a,r,n),t.resetForm(t,e,a,r,n),$("#addModal").modal()},t.treeModal=function(){t.treeUrl="getDepartmentTreeList",getTrees(t,e,a,r,n),t.modalTitle="部门结构树",$("#treeModal").modal()},t.remove=function(){$("#removeModal").modal("hide"),t.addLoading(),t.url="deleteDepartment",t.optName="删除",t.params={id:t.removeId},t.postApi(t)},t.search=function(){t.searchInfo(t)},t.changeStatus=function(){$("#changeStatusModal").modal("hide"),t.addLoading(),t.selectUrl="getDepartmentParentStatusFromId",t.selectParams={id:t.changeStatusNowId},t.selectPara="parentStatus",o.all([t.getSelectInfoApi(t)]).then(function(){if(0==t.parentStatus)return sweetAlert("警告","请先将该部门的父部门启用再执行后续操作!","warning"),void t.removeLoading();t.url="changeDepartmentStatus",t.optName="修改部门状态",t.params={statusType:t.changeStatusType,id:t.changeStatusId},t.postApi(t)})},t.reset=function(){t.resetSearch(t,e,a,r,n)},t.changeDepartmentStatus=function(){1==t.data.status&&0==t.data.parent.status&&(sweetAlert("警告","请先将该部门的父部门启用再执行后续操作!","warning"),t.data.status=0)},t.IfParentIsLogistics="",t.changeParentDepartment=function(){t.changeIfLogistics?t.changeIfLogistics=!1:null!=t.data.parent.id?(t.getIfLogisticsFromId(t.data.parent.id),1==t.parent.ifLogistics?(t.data.ifLogistics="1",t.IfParentIsLogistics="1"):(t.data.ifLogistics="0",t.IfParentIsLogistics="0")):t.data.ifLogistics="1"},t.getIfLogisticsFromId=function(e){angular.forEach(t.departmentSelectData,function(a){a.id==e&&(t.parent=a)})},t.changeCampus=function(i){var s=t.getScope("departmentAdd"),l=s.data.campus.id;t.selectParams={campusId:l},o.all([getDepartmentSelectData(t,e,a,r,n)]).then(function(){d.getLevelListFromDepartment(t),i&&i(),s.checkRepeat()})}}function departmentAddController(t,e,a,r,n){ComponentsBootstrapMaxlength.init(),t.save=function(){if($("#addModal").modal("hide"),t.addLoading(),t.url="saveDepartment",void 0!==t.data.id){t.optName="修改";var e=t.data.parent.id;delete t.data.parent,t.data.parent={id:e}}else t.dataRefresh=!0,t.optName="添加";t.params={data:JSON.stringify(t.data)},t.postApi(t)},t.checkRepeat=function(){t.repeatName="部门名称",t.repeatUrl="checkRepeatDepartment",t.checkRepeatName="name",delete t.params,t.checkRepeatApi(t)}}function departmentTreeController(t,e,a,r,n){}angular.module("MetronicApp").controller("departmentController",["$scope","$http","$compile","$location","$filter","$q","$rootScope",departmentController]),angular.module("MetronicApp").controller("departmentAddController",["$scope","$http","$compile","$location","$filter",departmentAddController]),angular.module("MetronicApp").controller("departmentTreeController",["$scope","$http","$compile","$location","$filter",departmentTreeController]);