function storageController(a,t,e,r,o,l,i){a.data={},a.searchObj={},a.selectSearchIdList=["selectSearch"],a.controllerName="storage",a.selectIdList=["select"],l.all([getMaterialCategorySelectData(a,t,e,r,o)]).then(function(){return getMaterialSelectData(a,t,e,r,o)}),a.newState=i,a.columns=[{data:"id"},{data:"material.name"},{data:"material.specificationsModel"},{data:"material.materialCategory.name"},{data:"material.materialUnit.name"},{data:"storageDocuments"},{data:"storageCount"},{data:"price"},{data:"totalPrice"},{data:"storageDate"},{data:"storagePerson"},{data:"addDateTime"}],a.orderableAry=[0],a.wrapAry=[1,2,3],a.wrapShortAry=[5],a.targetsOpt=12,a.dateFormatAry=9,a.order=[[9,"desc"]],a.optHtmlAry=["detail","remove"];var n="getStorageList";a.url=n,a.reloadUrl=n,a.initDataTablesName="storageDataTable",dataTables.init(a,t,e,r,o),a.searchInit=!0,a.datetimepickerId=["storageDateTime"],datePickers.init(a,t,e,r,o),a.resetInputList=["storageDocuments","storagePerson","storageCount"],a.addModal=function(){a.data={},a.resetErrorInput(a,t,e,r,o),a.modalTitle="添加入库信息",$("#price2").val("1.00"),a.triggerSelect(a,t,e,r,o),a.resetForm(a,t,e,r,o),$("#addModal").modal()},a.editModal=function(l){a.data=l,a.modalTitle="修改入库信息",a.triggerSelect(a,t,e,r,o),a.resetForm(a,t,e,r,o),$("#addModal").modal()},a.remove=function(){$("#removeModal").modal("hide"),a.addLoading(),a.url="deleteStorage",a.optName="删除",a.params={id:a.removeId},a.postApi(a)},a.search=function(){a.searchInfo(a)},a.reset=function(){a.resetSearch(a,t,e,r,o),a.resetDateTimePicker("storageDateTimeEnd","storageDateTimeStart")},a.selectMaterial=function(){var t=angular.copy(a.materialSelectData);angular.forEach(t,function(t){t.id==a.data.material.id&&(a.data.material=t),null==a.data.material.id&&(a.data.material=null)})},a.checkCountNum=function(){a.data.storageCount.match(/^[0-9]*[1-9][0-9]*$/)?a.countError=!1:(sweetAlert("警告","只能输入正整数！","error"),a.data.storageCount=null,a.countError=!0)}}function storageAddController(a,t,e,r,o,l){priceConfig(),a.searchInit=!1,a.option={format:"yyyy-mm-dd",minView:2,endDate:new Date},datePickers.init(a,t,e,r,o),a.save=function(){$("#addModal").modal("hide"),a.addLoading(),a.url="saveStorage",a.data.price=$("#price2").val(),void 0!==a.data.id?a.optName="修改":(a.dataRefresh=!0,a.optName="添加"),a.params={data:JSON.stringify(a.data)},l.all([a.postApi(a)]).then(function(){return a.getMaterialLessAlarmInfo()}).then(function(){getMaterialSelectData(a.getScope("storage"),t,e,r,o)})},a.checkRepeat=function(){a.repeatName="物料名称",a.repeatUrl="checkRepeatStorage",a.checkRepeatName="documents",a.checkRepeatApi(a)},$("#price2").on("change",function(){""==$(this).val()&&$(this).attr("value","1.00");var t=$(this).val();a.$apply(function(){var e=0;a.data.storageCount&&(e=a.data.storageCount),a.data.totalPrice=a.exactMul(t,e)})}),a.$watch("data.storageCount",function(t){t||(t=0),a.data.totalPrice=a.exactMul($("#price2").val(),t)})}angular.module("MetronicApp").controller("storageController",["$scope","$http","$compile","$location","$filter","$q","$state",storageController]),angular.module("MetronicApp").controller("storageAddController",["$scope","$http","$compile","$location","$filter","$q",storageAddController]);