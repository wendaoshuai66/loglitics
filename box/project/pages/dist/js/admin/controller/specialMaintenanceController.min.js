function specialMaintenanceController(a,e,t,n,i,r){a.data={},a.searchObj={},a.selectSearchIdList=["selectSearch"],a.controllerName="specialMaintenance",getStatusUseTypeData(a,e,t,n,i),a.selectIdList=["select","select2","select3","select4"],a.searchInit=!0,datePickers.init(a,e,t,n,i),a.columns=[{data:"id"},{data:"maintenanceNumber"},{data:"maintenanceSpecial.department.campus.name"},{data:"maintenanceAreaName"},{data:"address"},{data:"maintenanceItemName"},{data:"maintenanceContent"},{data:"maintenanceStartDateTime"},{data:"maintenanceEndDateTime"},{data:"maintenanceSpecial.department.name"},{data:"maintenanceStaff.name"},{data:"maintenanceStaff.tel"},{data:"maintenanceTime"}],a.orderableAry=[0],a.htmlType=[6],a.dateFormatAry=[7,8],a.targetsOpt=13,a.wrapAry=[1,5,9],a.wrapShortAry=[10],a.order=[[7,"desc"]],a.optHtmlAry=["detail","edit","remove"];var c="getSpecialMaintenance";a.url=c,a.reloadUrl=c,a.initDataTablesName="specialMaintenanceDataTable",dataTables.init(a,e,t,n,i),a.searchInit=!0,a.datetimepickerId=["addDateTime"],datePickers.init(a,e,t,n,i),a.resetInputList=["name","address","maintenanceContent"],r.all([getCampusSelectData(a,e,t,n,i)]).then(function(){return getMaintenanceAreaData(a,e,t,n,i)}).then(function(){return getWorkerSelectData(a,e,t,n,i)}),a.addModal=function(){a.addLoading(),$("select").removeProp("disabled"),$("#addModal").modal(),a.selectParams={getAll:!0,ifLogistics:1,ignoreDeleteAndStatus:!1},a.data={},a.resetErrorInput(a,e,t,n,i),delete a.maintenanceAreaDataFromCampus,delete a.departmentDataFromArea,delete a.workerDataFromDepartment,a.data.maintenanceNumber=getMaintenanceNumber(),a.modalTitle="添加专项维修项目",a.data.status="1",a.triggerSelect(a,e,t,n,i),a.resetForm(a,e,t,n,i),a.removeLoading()},a.editModal=function(c){a.addLoading(),$("#addModal").modal(),a.selectParams={getAll:!0,ifLogistics:1,ignoreDeleteAndStatus:!0},$("select").prop("disabled","true"),r.all([getDepartmentSelectData(a,e,t,n,i)]).then(function(){a.selectParams.ignoreDeleteAndStatus=!1,a.data=c,a.data.maintenanceStartDateTime=subDateStr(a.data.maintenanceStartDateTime),a.data.maintenanceEndDateTime=subDateStr(a.data.maintenanceEndDateTime),a.modalTitle="修改专项维修项目",a.maintenanceAreaDataFromCampus=a.maintenanceAreaData,a.departmentDataFromArea=a.departmentSelectData,a.workerDataFromDepartment=a.workerSelectData,a.triggerSelect(a,e,t,n,i),a.resetForm(a,e,t,n,i),a.removeLoading()})},a.remove=function(){$("#removeModal").modal("hide"),a.addLoading(),a.url="deleteSpecialMaintenance",a.optName="删除",a.params={id:a.removeId},a.postApi(a)},a.search=function(){a.searchInfo(a)},a.reset=function(){a.resetSearch(a,e,t,n,i),a.resetDateTimePicker("addDateTimeEnd","addDateTimeStart")},a.changeCampus=function(c){if(!a.data.id){var d=a.data.maintenanceSpecial.department.campus.id;null!=d&&(a.selectParams={getAll:!1,ifLogistics:1,campusId:d},r.all([getDepartmentSelectData(a,e,t,n,i)]).then(function(){var e=d,t=angular.copy(a.maintenanceAreaData),n=[];null!=e&&angular.forEach(t,function(a){a.campus.id==e&&n.push(a)}),a.maintenanceAreaDataFromCampus=n,a.data.maintenanceSpecial.department.campus.id=e,c&&c()}))}},a.changeMaintenanceArea=function(){if(!a.data.id){var e=a.data.maintenanceArea.id,t=angular.copy(a.maintenanceAreaData),n=e,i=angular.copy(a.departmentSelectData),r=[];null!=n&&angular.forEach(i,function(a){var e=[];t.forEach(function(a){$.inArray(a.id,n)>=0&&e.push(a.department.id)}),-1!=$.inArray(a.id,e)&&r.push(a)}),a.departmentDataFromArea=r}},a.changeDepartment=function(){if(!a.data.id){var e=a.data.maintenanceSpecial.department.id,t=angular.copy(a.workerSelectData),n=[];null!=e&&angular.forEach(t,function(a){a.maintenanceWorker.department.id==e&&n.push(a)}),a.workerDataFromDepartment=n}},a.maintenanceDateChange=function(){var e=a.data.maintenanceStartDateTime,t=a.data.maintenanceEndDateTime;null!=e&&null!=t?a.data.maintenanceTime=parseInt(Math.abs(new Date(Date.parse(t))-new Date(Date.parse(e)))/1e3/60/60/24)+1:delete a.data.maintenanceTime}}function specialMaintenanceAddController(a,e,t,n,i){ComponentsBootstrapMaxlength.init(),a.searchInit=!1,a.formInit=!0,a.option={format:"yyyy-mm-dd",minView:2},a.datetimepickerId=["maintenance"],datePickers.init(a,e,t,n,i),a.save=function(){$("#addModal").modal("hide"),a.addLoading(),a.url="saveSpecialMaintenance",void 0!==a.data.id?a.optName="修改":(a.dataRefresh=!0,a.optName="添加"),a.params={data:JSON.stringify(a.data)},a.postApi(a)},a.checkRepeat=function(){a.data.name=a.data.maintenanceItemName,a.repeatName="专项维修名称",a.repeatUrl="checkRepeatSpecialMaintenance",a.checkRepeatName="name",a.checkRepeatApi(a)}}angular.module("MetronicApp").controller("specialMaintenanceController",["$scope","$http","$compile","$location","$filter","$q",specialMaintenanceController]),angular.module("MetronicApp").controller("specialMaintenanceAddController",["$scope","$http","$compile","$location","$filter",specialMaintenanceAddController]);