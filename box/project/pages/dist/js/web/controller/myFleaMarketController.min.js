function myFleaMarketController(a,t,e,l,r,o,i,d,n){var s;null===i.type?s=a.getControllerPageId("fleaMarketType"):(s=i.type,a.setControllerPageId("fleaMarketType",s)),a.data={},a.searchObj={},a.controllerName="myFleaMarket",a.columns=[{data:"id"},{data:"title"},{data:"price"},{data:"addDateTime"},{data:"approvalStatus"},{data:"dealStatus"}],a.orderableAry=[0,1,2,4,5],a.viewFleaMarketAry=[1],a.approvalStatus=4,a.dealStatus=5,a.targetsOpt=6,a.optHtmlAry=["remove"],a.order=[[3,"desc"]];var p="getFleaMarketList";a.url=p,a.reloadUrl=p,a.searchInit=!0,a.searchObj.type=s,a.searchObj.person={id:a.loginUser.id},a.dataTableInit={},a.initDataTablesName="myFleaMarketDataTable",dataTables.init(a,t,e,l,r),a.remove=function(){$("#removeModal").modal("hide"),a.addLoading(),a.url="deleteFleaMarket",a.optName="删除",a.params={id:a.removeId},a.postApi(a,function(){a.url="getFleaMarketList",a.reloadUrl="getFleaMarketList",$("#"+a.initDataTablesName).DataTable().ajax.reload(function(){},!1)})},a.changeStatus=function(){$("#changeStatusModal").modal("hide"),a.addLoading(),a.url="changeFleaMarketStatus",a.optName="修改状态",a.params={statusType:a.changeStatusType,id:a.changeStatusId},a.postApi(a,function(){a.url="getFleaMarketList",a.reloadUrl="getFleaMarketList",$("#"+a.initDataTablesName).DataTable().ajax.reload(function(){},!1)})},a.changeTab=function(o){1===o||"1"===o?(a.searchObj.type=1,$("#"+a.initDataTablesName).DataTable().ajax.reload(function(){},!1)):(a.tableName="dataTable1",a.searchInit=!0,a.searchObj.type=0,a.dataTableInit[a.tableName]?$("#"+a.initDataTablesName).DataTable().ajax.reload(function(){},!1):dataTables.init(a,t,e,l,r))}}function fleaMarketAddController(a,t,e,l,r,o,i,d,n){a.uploadSuccessImgUrl=[],a.thisPageAddImgCount=0,a.uploadTypeOnlyImg=!0,a.maxImg=uploadImgMaxCount,Upload.init(a,o),priceConfig(),getFleaMarketStatusData(a,t,e,l,r);var s;i.id&&(s=i.id),a.data={},a.params={id:s},s?getViewDataShow(a,t,e,l,r):null===i.type?a.data.type=a.getControllerPageId("fleaMarketType"):(a.data.type=i.type,a.setControllerPageId("fleaMarketType",a.data.type)),ComponentsBootstrapMaxlength.init(),a.save=function(){a.addLoading(),a.url="saveFleaMarket",a.data.person={id:a.loginUser.id},a.optName="保存",a.data.price=$("#price").val();var t=a.unEmptyList(a.uploadSuccessImgUrl);a.data.fileUrls=t.join(","),a.params={data:JSON.stringify(a.data)},a.stateNewPage=!1,a.initDataTablesName="myFleaMarketDataTable",d.all([a.postApi(a)]).then(function(){a.data.type?n.go("myFleaMarketListSale",{type:a.data.type}):n.go("myFleaMarketListPurchase",{type:a.data.type})})}}function fleaMarketViewController(a,t,e,l,r,o,i,d,n){getFleaMarketStatusData(a,t,e,l,r);var s;i.id&&(s=i.id),a.url="updateFleaMarketViewTimesById",a.params={id:s},a.slideImageWidth=slideImageWidth,a.slideImageHeight=slideImageHeight,t({method:"POST",url:a.httpDomain+a.url,data:a.params}).success(function(a){}),getViewDataShow(a,t,e,l,r),a.changeStatus=function(){var t;t="1"===a.data.dealStatus?"0":"1",a.data.dealStatus=t,$("#changeStatusModal").modal("hide"),a.addLoading(),a.url="changeFleaMarketStatus",a.optName="修改状态",a.params={statusType:"dealStatus",id:s},a.postApi(a,function(){a.url="getFleaMarketList",a.reloadUrl="getFleaMarketList",$("#"+a.initDataTablesName).DataTable().ajax.reload(function(){},!1)})},a.showModule=function(){$("#changeStatusModal").modal()}}function getViewDataShow(a,t,e,l,r){a.url="getFleaMarketById",a.ifAuthorSelf=!1,t({method:"POST",url:a.httpDomain+a.url,data:a.params}).success(function(t){a.data=t.data;var e;t.data&&t.data.imgUrls&&t.data.imgUrls.uploadFileUrl&&(e=t.data.imgUrls.uploadFileUrl.split(",")),e&&(a.data.urls=e),a.loginUser&&a.loginUser.id&&a.data&&a.data.person&&a.loginUser.id==a.data.person.id&&(a.ifAuthorSelf=!0)})}angular.module("MetronicApp").controller("myFleaMarketController",["$scope","$http","$compile","$location","$filter","$timeout","$stateParams","$q","$state",myFleaMarketController]),angular.module("MetronicApp").controller("fleaMarketAddController",["$scope","$http","$compile","$location","$filter","$timeout","$stateParams","$q","$state",fleaMarketAddController]),angular.module("MetronicApp").controller("fleaMarketViewController",["$scope","$http","$compile","$location","$filter","$timeout","$stateParams","$q","$state",fleaMarketViewController]);