function myWorkLogController(t,e,a,r,o){t.data={},t.searchObj={},t.controllerName="myWorkLog",t.columns=[{data:"id"},{data:"title"},{data:"user.name"},{data:"workDate"},{data:"startTime"},{data:"endTime"},{data:"addDateTime"}],t.orderableAry=[0,1,2,3,4,5],t.order=[[6,"desc"]],t.viewWorkLogAry=[1],t.dateFormatMonthDay=[3],t.dateFormatHourDay=[4,5],t.targetsOpt=7,t.optHtmlAry=["remove"];var i="getDiaryList";t.url=i,t.reloadUrl=i,t.searchObj.user={id:t.loginUser.id},t.searchInit=!0,t.initDataTablesName="myWorkLogDataTable",dataTables.init(t,e,a,r,o),t.remove=function(){$("#removeModal").modal("hide"),t.addLoading(),t.url="deleteDiary",t.optName="删除",t.params={id:t.removeId},t.postApi(t,function(){t.url="getDiaryList",t.reloadUrl="getDiaryList",$("#"+t.initDataTablesName).DataTable().ajax.reload(function(){},!1)})}}function workLogAddController(t,e,a,r,o,i,d,n,m){ComponentsBootstrapMaxlength.init(),t.data={},t.save=function(){var e={startTime:t.data.workDate+" "+t.data.workLogStartTime+":00",endTime:t.data.workDate+" "+t.data.workLogEndTime+":00"};$.extend(t.data,e),delete t.data.workLogStartTime,delete t.data.workLogEndTime,t.addLoading(),t.optName="保存",t.url="saveDiary",t.data.user={id:t.loginUser.id},t.params={data:JSON.stringify(t.data)},t.stateNewPage=!0,t.returnControllerName="myWorkLogList",t.postApi(t)},t.searchInit=!1,t.option={format:"yyyy-mm-dd",minView:2,endDate:new Date},t.datetimepickerId=["workLog"],datePickers.init(t,e,a,r,o),t.option={format:"hh:ii",minView:0},t.formInitTime=!0,t.timepickerId=["workLog"],timePickers.init(t,e,a,r,o),$(".table-condensed .switch").css({visibility:"hidden"}),t.data.workDate=(new Date).Format("yyyy-MM-dd"),t.data.workLogStartTime="08:00",t.data.workLogEndTime="18:00",t.workLogStartChange=function(){angular.forEach(t.timepickerId,function(e){$("#"+e+"End").datetimepicker("setStartDate",t.getNextOrPrev5minTime(t.data[e+"StartTime"],!1)),t.checkErrorInputAndFixed(e),$("#"+e+"Start").datetimepicker("hide")})},t.workLogEndChange=function(){angular.forEach(t.timepickerId,function(e){$("#"+e+"Start").datetimepicker("setEndDate",t.getNextOrPrev5minTime(t.data[e+"EndTime"],!0)),t.checkErrorInputAndFixed(e),$("#"+e+"End").datetimepicker("hide")})},t.getNextOrPrev5minTime=function(e,a){var r=e.split(":"),o=r[0],i=r[1];return a?i<<0>=5?o+":"+t.timeLeftAddZero((i<<0)-5):t.timeLeftAddZero((o<<0)-1)+":55":i<<0<=55?o+":"+t.timeLeftAddZero(5+(i<<0)):t.timeLeftAddZero(1+(o<<0))+":00"},t.checkErrorInputAndFixed=function(e){var a=t.data[e+"StartTime"].split(":"),r=a[0],o=a[1],i=t.data[e+"EndTime"].split(":"),d=i[0],n=i[1],m=!1;r>d?m=!0:r==d&&o>=n&&(m=!0),m&&(n<<0>=5?t.data[e+"StartTime"]=t.timeLeftAddZero(d<<0)+":"+t.timeLeftAddZero((n<<0)-5):0!=d?t.data[e+"StartTime"]=t.timeLeftAddZero((d<<0)-1)+":55":t.data[e+"EndTime"]="00:05")},t.workLogStartChange(),t.workLogEndChange()}function workLogViewController(t,e,a,r,o,i,d,n){var m;d.id&&(m=d.id),t.url="getDiaryById",t.params={id:m},e({method:"POST",url:t.httpDomain+t.url,params:t.params}).success(function(e){t.data=e.data;var a=t.data.startTime.split(" ")[1].split(":"),r=t.data.endTime.split(" ")[1].split(":");r.pop(),a.pop(),a.join(":"),r.join(":"),t.data.startTime=a.join(":"),t.data.endTime=r.join(":"),t.data.workDate=t.data.workDate.split(" ")[0],t.data.addDateTime=t.data.addDateTime.split(" ")[0]})}angular.module("MetronicApp").controller("myWorkLogController",["$scope","$http","$compile","$location","$filter",myWorkLogController]),angular.module("MetronicApp").controller("workLogAddController",["$scope","$http","$compile","$location","$filter","$timeout","$stateParams","$q","$state",workLogAddController]),angular.module("MetronicApp").controller("workLogViewController",["$scope","$http","$compile","$location","$filter","$timeout","$stateParams","$q",workLogViewController]);